set $mod Mod4

# Window title font
font pango:Noto Mono 12

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
bindsym $mod+Return exec i3-sensible-terminal

# kill focused window
bindsym $mod+Shift+q kill

# Change window focus
bindsym $mod+Mod1+Left  focus left
bindsym $mod+Mod1+Down  focus down
bindsym $mod+Mod1+Up    focus up
bindsym $mod+Mod1+Right focus right

bindsym $mod+Left  exec --no-startup-id i3-msg workspace prev
bindsym $mod+Right exec --no-startup-id i3-msg workspace next

# split in horizontal orientation
bindsym $mod+Shift+h split h

# split in vertical orientation
bindsym $mod+Shift+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+Mod2+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# Set workspaces
set $wk1 " 1   "
set $wk2 " 2   "
set $wk3 " 3   "
set $wk4 " 4   "
set $wk5 " 5   "
set $wk6 " 6   "
set $wk7 " 7   "
set $wk8 " 8   "
set $wk9 " 9   "

# switch to workspace
bindsym $mod+1 workspace $wk1
bindsym $mod+2 workspace $wk2
bindsym $mod+3 workspace $wk3
bindsym $mod+4 workspace $wk4
bindsym $mod+5 workspace $wk5
bindsym $mod+6 workspace $wk6
bindsym $mod+7 workspace $wk7
bindsym $mod+8 workspace $wk8
bindsym $mod+9 workspace $wk9

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $wk1
bindsym $mod+Shift+2 move container to workspace $wk2
bindsym $mod+Shift+3 move container to workspace $wk3
bindsym $mod+Shift+4 move container to workspace $wk4
bindsym $mod+Shift+5 move container to workspace $wk5
bindsym $mod+Shift+6 move container to workspace $wk6
bindsym $mod+Shift+7 move container to workspace $wk7
bindsym $mod+Shift+8 move container to workspace $wk8
bindsym $mod+Shift+9 move container to workspace $wk9

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec i3-msg exit

# resize window (you can also use the mouse for that)
mode "resize" {
	# These bindings trigger as soon as you enter the resize mode
	# Pressing left will shrink the window’s width.
	# Pressing right will grow the window’s width.
	# Pressing up will shrink the window’s height.
	# Pressing down will grow the window’s height.
	bindsym Left  resize shrink width  16 px
	bindsym Down  resize grow   height 16 px
	bindsym Up    resize shrink height 16 px
	bindsym Right resize grow   width  16 px

	# back to normal: Enter or Escape
	bindsym Return mode "default"
	bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# mode "borders" {
# 	bindsym $mod+n gaps inner all set 16; gaps outer all set 16; mode "default";
# 	bindsym $mod+m gaps inner all set 0; gaps outer all set 0; mode "default";

# 	bindsym Escape mode "default"
# 	bindsym Return mode "default"
# }
# bindsym $mod+b mode "borders"

set $vpn VPN: (v)pn, (o)ff
mode "$vpn"{
	bindsym v exec --no-startup-id ~/.dotfiles/i3blocks/vpn on "e3fc02a9-39d2-408f-9f23-63bf69a31d2d"; mode "default"
	bindsym o exec --no-startup-id ~/.dotfiles/i3blocks/vpn off "e3fc02a9-39d2-408f-9f23-63bf69a31d2d"; mode "default"
	bindsym Return mode "default"
	bindsym Escape mode "default"
}
bindsym $mod+v mode "$vpn"

set $bluetooth Bluetooth: (b)luetooth, (o)ff
mode "$bluetooth"{
	bindsym b exec --no-startup-id ~/.dotfiles/i3blocks/bluetooth on; mode "default"
	bindsym o exec --no-startup-id ~/.dotfiles/i3blocks/bluetooth off; mode "default"
	bindsym Return mode "default"
	bindsym Escape mode "default"
}
bindsym $mod+b mode "$bluetooth"

# Start compton
exec --no-startup-id compton --config ~/.dotfiles/compton.conf

# Load apps on startup
exec urxvt
exec subl
exec --no-startup-id ~/.dotfiles/start-xflux.sh
exec --no-startup-id nm-applet
exec --no-startup-id pulseaudio --start
exec --no-startup-id synclient TapButton1=1 TapButton2=3 TapButton3=2
exec discord

# Set wallpaper based on time
exec_always --no-startup-id ~/.dotfiles/wallpaper.sh

for_window [class="^.*"] border pixel 1
for_window [class="Optimisation Method Creature Generation"] floating enable

gaps inner 16
gaps outer 16
smart_gaps on
smart_borders on

assign [class="^URxvt$" instance="urxvt"] $wk1
assign [class="(Subl|Code)"] $wk2
assign [class="Firefox"] $wk3
assign [class="Pcmanfm" title="^(?!.*Confirm).*$"] $wk4
assign [class="^URxvt$" instance="cmus"] $wk7
assign [class="discord"] $wk8
assign [class="(Totem|MPlayer)"] $wk9

# Update i3blocks when Caps Lock is pressed
bindsym --release Caps_Lock exec pkill -SIGRTMIN+11 i3blocks

# Lock screen
bindsym $mod+l exec --no-startup-id ~/.dotfiles/lock.sh

# Music Player
bindsym $mod+m exec urxvt -name "cmus" -e cmus

# scrot
bindsym Print exec --no-startup-id scrot -e 'mv $f ~/Pictures/Screenshots'
# scrot - select window or rectangle
bindsym --release $mod+Print exec --no-startup-id scrot -s -e 'mv $f ~/Pictures/Screenshots'

# MEDIA KEYS

# Pulse Audio controls
# bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume alsa_output.pci-0000_00_1b.0.analog-stereo +2%    && pkill -SIGRTMIN+10 i3blocks # increase sound volume
# bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume alsa_output.pci-0000_00_1b.0.analog-stereo -2%    && pkill -SIGRTMIN+10 i3blocks # decrease sound volume
bindsym XF86AudioRaiseVolume exec --no-startup-id amixer -q sset Master 2%+ && pkill -SIGRTMIN+10 i3blocks # increase sound volume
bindsym XF86AudioLowerVolume exec --no-startup-id amixer -q sset Master 2%- && pkill -SIGRTMIN+10 i3blocks # decrease sound volume
bindsym XF86AudioMute        exec --no-startup-id pactl set-sink-mute   alsa_output.pci-0000_00_1b.0.analog-stereo toggle && pkill -SIGRTMIN+10 i3blocks # mute sound

# Screen brightness controls
bindsym XF86MonBrightnessUp   exec --no-startup-id xbacklight -inc 5 && pkill -SIGRTMIN+12 i3blocks # increase screen brightness
bindsym XF86MonBrightnessDown exec --no-startup-id xbacklight -dec 5 && pkill -SIGRTMIN+12 i3blocks # decrease screen brightness

# Other shortcuts
bindsym XF86Calculator exec bash /usr/bin/=
bindsym XF86MyComputer exec pcmanfm
bindsym XF86HomePage exec firefox
bindsym XF86Explorer exec rofi -show drun

# Music
bindsym $mod+Home  exec --no-startup-id cmus-remote -u && pkill -SIGRTMIN+9 i3blocks
bindsym $mod+End   exec --no-startup-id cmus-remote -s && pkill -SIGRTMIN+9 i3blocks
bindsym $mod+Prior exec --no-startup-id cmus-remote -r && pkill -SIGRTMIN+9 i3blocks
bindsym $mod+Next  exec --no-startup-id cmus-remote -n && pkill -SIGRTMIN+9 i3blocks

bindsym XF86AudioPlay exec --no-startup-id cmus-remote -u && pkill -SIGRTMIN+9 i3blocks
bindsym XF86AudioPrev exec --no-startup-id cmus-remote -r && pkill -SIGRTMIN+9 i3blocks
bindsym XF86AudioNext exec --no-startup-id cmus-remote -n && pkill -SIGRTMIN+9 i3blocks

# Rofi Desktop Applications
bindsym $mod+space exec rofi -show drun
# Rofi Surfraw
bindsym $mod+Mod1+space exec ~/.dotfiles/menu-surfraw

# Colour Scheme
set $c_white	#ffffff
set $c_black	#000000
set $c_light	#e4e4e4
set $c_dark 	#2f2f2f
set $c_urgent	#ea9815

#						border		background	text		indicator
client.focused			$c_light	$c_light	$c_dark 	$c_dark
client.focused_inactive $c_dark		$c_dark		$c_white	$c_dark
client.unfocused		$c_dark		$c_dark		$c_light	$c_dark
client.urgent 			$c_urgent	$c_urgent	$c_white	$c_urgent

bar {
	status_command i3blocks -c ~/.dotfiles/i3blocks.conf
	font pango:Noto Mono, FontAwesome 11
	position top
	height 32
	colors {
		separator  $c_dark
		background $c_dark
		statusline $c_white
		#                   border      background  text
		focused_workspace   $c_light    $c_light    $c_dark
		active_workspace    $c_dark		$c_dark     $c_white
		inactive_workspace  $c_dark     $c_dark     $c_white
		urgent_workspace    $c_urgent   $c_urgent   $c_white
	}
}
